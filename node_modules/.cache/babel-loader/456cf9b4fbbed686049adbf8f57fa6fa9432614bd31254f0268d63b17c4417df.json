{"ast":null,"code":"import React,{useEffect,useRef}from'react';import*as d3 from'd3';import{jsx as _jsx}from\"react/jsx-runtime\";const GanttChart=_ref=>{let{data,width=800,height=200}=_ref;const svgRef=useRef(null);useEffect(()=>{if(!data.length||!svgRef.current)return;// Clear previous chart\nd3.select(svgRef.current).selectAll('*').remove();const margin={top:20,right:50,bottom:40,left:60};const chartWidth=width-margin.left-margin.right;const chartHeight=height-margin.top-margin.bottom;const svg=d3.select(svgRef.current).attr('width',width).attr('height',height);const chart=svg.append('g').attr('transform',\"translate(\".concat(margin.left,\",\").concat(margin.top,\")\"));// Create scales with padding\nconst timeScale=d3.scaleLinear().domain([0,d3.max(data,d=>d.endTime)||0]).range([0,chartWidth]).nice();// Round to nice numbers\nconst uniqueProcessIds=Array.from(new Set(data.map(d=>d.processId)));const processScale=d3.scaleBand().domain(uniqueProcessIds).range([0,chartHeight]).padding(0.3);// Increase padding between bars\n// Add grid lines\nchart.append('g').attr('class','grid').attr('opacity',0.1).attr('transform',\"translate(0,\".concat(chartHeight,\")\")).call(d3.axisBottom(timeScale).tickSize(-chartHeight).tickFormat(()=>''));// Add axes with improved styling\nconst xAxis=d3.axisBottom(timeScale).tickFormat(d=>d.toString()).ticks(10);const yAxis=d3.axisLeft(processScale);chart.append('g').attr('class','x-axis').attr('transform',\"translate(0,\".concat(chartHeight,\")\")).call(xAxis).append('text').attr('class','axis-label').attr('x',chartWidth/2).attr('y',35).attr('fill','black').style('text-anchor','middle').style('font-size','12px').text('Time Units');chart.append('g').attr('class','y-axis').call(yAxis).append('text').attr('class','axis-label').attr('transform','rotate(-90)').attr('x',-chartHeight/2).attr('y',-45).attr('fill','black').style('text-anchor','middle').style('font-size','12px').text('Process ID');// Add Gantt blocks with animations\nconst blocks=chart.selectAll('rect').data(data).enter().append('rect').attr('x',d=>timeScale(d.startTime)).attr('y',d=>processScale(d.processId)||0).attr('width',0)// Start with width 0 for animation\n.attr('height',processScale.bandwidth()).attr('fill',d=>d.color).attr('rx',4).attr('ry',4).style('filter','drop-shadow(2px 2px 2px rgba(0,0,0,0.1))');// Animate blocks\nblocks.transition().duration(750).attr('width',d=>timeScale(d.endTime)-timeScale(d.startTime));// Add tooltips with more information\nblocks.append('title').text(d=>{return\"Process: \".concat(d.processId,\"\\nStart Time: \").concat(d.startTime,\"\\nEnd Time: \").concat(d.endTime,\"\\nDuration: \").concat(d.endTime-d.startTime);});// Add time labels with better positioning and contrast\nconst labels=chart.selectAll('.time-label').data(data).enter().append('text').attr('class','time-label').attr('x',d=>timeScale(d.startTime)+(timeScale(d.endTime)-timeScale(d.startTime))/2).attr('y',d=>(processScale(d.processId)||0)+processScale.bandwidth()/2).attr('dy','0.35em').attr('text-anchor','middle').style('fill','white').style('font-size','11px').style('font-weight','bold').style('pointer-events','none').style('text-shadow','1px 1px 1px rgba(0,0,0,0.3)').text(d=>d.endTime-d.startTime);// Fade in labels\nlabels.style('opacity',0).transition().delay(750)// Wait for blocks animation\n.duration(500).style('opacity',1);},[data,width,height]);return/*#__PURE__*/_jsx(\"div\",{className:\"overflow-x-auto shadow-lg rounded-lg bg-white p-4\",children:/*#__PURE__*/_jsx(\"svg\",{ref:svgRef,className:\"gantt-chart w-full\"})});};export default GanttChart;","map":{"version":3,"names":["React","useEffect","useRef","d3","jsx","_jsx","GanttChart","_ref","data","width","height","svgRef","length","current","select","selectAll","remove","margin","top","right","bottom","left","chartWidth","chartHeight","svg","attr","chart","append","concat","timeScale","scaleLinear","domain","max","d","endTime","range","nice","uniqueProcessIds","Array","from","Set","map","processId","processScale","scaleBand","padding","call","axisBottom","tickSize","tickFormat","xAxis","toString","ticks","yAxis","axisLeft","style","text","blocks","enter","startTime","bandwidth","color","transition","duration","labels","delay","className","children","ref"],"sources":["C:/Users/ayush/OneDrive/Desktop/Job Scheduler/src/components/GanttChart.tsx"],"sourcesContent":["import React, { useEffect, useRef } from 'react';\nimport * as d3 from 'd3';\nimport { Selection } from 'd3';\nimport { GanttChartBlock } from '../utils/types';\n\ntype D3Selection = Selection<any, any, any, any>;\n\ninterface GanttChartProps {\n    data: GanttChartBlock[];\n    width?: number;\n    height?: number;\n}\n\nconst GanttChart: React.FC<GanttChartProps> = ({ data, width = 800, height = 200 }) => {\n    const svgRef = useRef<SVGSVGElement>(null);\n\n    useEffect(() => {\n        if (!data.length || !svgRef.current) return;\n\n        // Clear previous chart\n        d3.select(svgRef.current).selectAll('*').remove();\n\n        const margin = { top: 20, right: 50, bottom: 40, left: 60 };\n        const chartWidth = width - margin.left - margin.right;\n        const chartHeight = height - margin.top - margin.bottom;\n\n        const svg = d3.select(svgRef.current)\n            .attr('width', width)\n            .attr('height', height);\n\n        const chart = svg.append('g')\n            .attr('transform', `translate(${margin.left},${margin.top})`);\n\n        // Create scales with padding\n        const timeScale = d3.scaleLinear()\n            .domain([0, d3.max(data, d => d.endTime) || 0])\n            .range([0, chartWidth])\n            .nice(); // Round to nice numbers\n\n        const uniqueProcessIds = Array.from(new Set(data.map(d => d.processId)));\n        const processScale = d3.scaleBand()\n            .domain(uniqueProcessIds)\n            .range([0, chartHeight])\n            .padding(0.3); // Increase padding between bars\n\n        // Add grid lines\n        chart.append('g')\n            .attr('class', 'grid')\n            .attr('opacity', 0.1)\n            .attr('transform', `translate(0,${chartHeight})`)\n            .call(\n                d3.axisBottom(timeScale)\n                    .tickSize(-chartHeight)\n                    .tickFormat(() => '')\n            );\n\n        // Add axes with improved styling\n        const xAxis = d3.axisBottom(timeScale)\n            .tickFormat(d => d.toString())\n            .ticks(10);\n\n        const yAxis = d3.axisLeft(processScale);\n\n        chart.append('g')\n            .attr('class', 'x-axis')\n            .attr('transform', `translate(0,${chartHeight})`)\n            .call(xAxis)\n            .append('text')\n            .attr('class', 'axis-label')\n            .attr('x', chartWidth / 2)\n            .attr('y', 35)\n            .attr('fill', 'black')\n            .style('text-anchor', 'middle')\n            .style('font-size', '12px')\n            .text('Time Units');\n\n        chart.append('g')\n            .attr('class', 'y-axis')\n            .call(yAxis)\n            .append('text')\n            .attr('class', 'axis-label')\n            .attr('transform', 'rotate(-90)')\n            .attr('x', -chartHeight / 2)\n            .attr('y', -45)\n            .attr('fill', 'black')\n            .style('text-anchor', 'middle')\n            .style('font-size', '12px')\n            .text('Process ID');\n\n        // Add Gantt blocks with animations\n        const blocks = chart.selectAll('rect')\n            .data(data)\n            .enter()\n            .append('rect')\n            .attr('x', (d: GanttChartBlock) => timeScale(d.startTime))\n            .attr('y', (d: GanttChartBlock) => processScale(d.processId) || 0)\n            .attr('width', 0) // Start with width 0 for animation\n            .attr('height', processScale.bandwidth())\n            .attr('fill', (d: GanttChartBlock) => d.color)\n            .attr('rx', 4)\n            .attr('ry', 4)\n            .style('filter', 'drop-shadow(2px 2px 2px rgba(0,0,0,0.1))');\n\n        // Animate blocks\n        blocks.transition()\n            .duration(750)\n            .attr('width', (d: GanttChartBlock) => timeScale(d.endTime) - timeScale(d.startTime));\n\n        // Add tooltips with more information\n        blocks.append('title')\n            .text((d: GanttChartBlock) => {\n                return `Process: ${d.processId}\nStart Time: ${d.startTime}\nEnd Time: ${d.endTime}\nDuration: ${d.endTime - d.startTime}`;\n            });\n\n        // Add time labels with better positioning and contrast\n        const labels = chart.selectAll('.time-label')\n            .data(data)\n            .enter()\n            .append('text')\n            .attr('class', 'time-label')\n            .attr('x', (d: GanttChartBlock) => timeScale(d.startTime) + (timeScale(d.endTime) - timeScale(d.startTime)) / 2)\n            .attr('y', (d: GanttChartBlock) => (processScale(d.processId) || 0) + processScale.bandwidth() / 2)\n            .attr('dy', '0.35em')\n            .attr('text-anchor', 'middle')\n            .style('fill', 'white')\n            .style('font-size', '11px')\n            .style('font-weight', 'bold')\n            .style('pointer-events', 'none')\n            .style('text-shadow', '1px 1px 1px rgba(0,0,0,0.3)')\n            .text((d: GanttChartBlock) => d.endTime - d.startTime);\n\n        // Fade in labels\n        labels.style('opacity', 0)\n            .transition()\n            .delay(750) // Wait for blocks animation\n            .duration(500)\n            .style('opacity', 1);\n\n    }, [data, width, height]);\n\n    return (\n        <div className=\"overflow-x-auto shadow-lg rounded-lg bg-white p-4\">\n            <svg ref={svgRef} className=\"gantt-chart w-full\"></svg>\n        </div>\n    );\n};\n\nexport default GanttChart;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}